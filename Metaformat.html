


<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Metaformat</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css?v=34905f61" />
    <link rel="stylesheet" type="text/css" href="_static/details_summary_hide.css?v=30df4bca" />
    <link rel="stylesheet" href="_static/blockquote.css" type="text/css" />
    <link rel="stylesheet" href="_static/rubric.css" type="text/css" />
    <script src="_static/documentation_options.js?v=b08bce9f"></script>
    <script src="_static/doctools.js?v=fd6eb6e6"></script>
    <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
    <link rel="icon" href="https://raw.githubusercontent.com/nexusformat/NIAC/master/NeXus_Logo/NeXus_Logo_dark_square.svg"/>
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Monochromatic Neutron and X-ray Powder Diffraction" href="Monochromatic_Neutron_and_X-ray_Powder_Diffraction.html" />
    <link rel="prev" title="Membership Dates" href="Membership_Dates.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="Monochromatic_Neutron_and_X-ray_Powder_Diffraction.html" title="Monochromatic Neutron and X-ray Powder Diffraction"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="Membership_Dates.html" title="Membership Dates"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html"></a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Metaformat</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="metaformat">
<h1>Metaformat<a class="headerlink" href="#metaformat" title="Link to this heading">¶</a></h1>
<p>(<em>work is currently in progress to replace Meta-DTDs with [XML
schema] (Schema.html “wikilink”)</em>)</p>
<p>The contents of NeXus files are defined using XML. The hierarchical
structure of NeXus files maps very conveniently into XML files with
NeXus groups and items as the XML entities, and data attributes as XML
attributes. NeXus utilities are being developed to help people determine
whether their files are standard-conforming. However, formal XML format
definitions (DTDs) are difficult for the non-expert to read, so we have
produced a much simpler meta-DTD format, which produces well-formed
(DTD-less) XML files that will be converted into DTD files. This page
describes the rules for producing these files - some examples are
available below and in the NeXus content section. The utility NXtoDTD
can be used to generate the skeleton of such a file from an existing
NeXus file; it outputs the XML tags without the data or any annotation.</p>
<section id="meta-dtd-definition">
<h2>Meta-DTD Definition<a class="headerlink" href="#meta-dtd-definition" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Each meta-DTD file should begin with a standard XML document tag,
i.e.</p></li>
</ul>
<!-- -->
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; ?&gt;
</pre></div>
</div>
<p>This should be followed by a comment block giving the URL of the XML
file, the name of the editor, the keyword $Id$, which will generate a
revision number when the file is committed to the
[SubversionServer] (SubversionServer.html “wikilink”), and a brief description
of the file, e.g.</p>
<!-- -->
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;!--
URL:     http://www.neutron.anl.gov/nexus/xml/NXgroup.xml
Editor:  Jean Dupont &lt;JDupont@some.where&gt;
$Id$

Definition of a fake but well-formed NeXus group.

--&gt;
</pre></div>
</div>
<ul class="simple">
<li><p>Each NeXus group is an XML entity defined by its class, e.g. NXuser,
NXdata, ….</p></li>
<li><p>The name of the group is given by the name attribute of the entity.</p></li>
</ul>
<p>N.B. XML attributes are the name=“value” pairs located within the
opening tag of the XML entity, e.g.</p>
<!-- -->
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;NXsample name=&quot;sample&quot;&gt;
</pre></div>
</div>
<p>All other data items are XML entities defined by their name, e.g.
<temperature></p>
<ul class="simple">
<li><p>Data attributes are stored as XML attributes. The data type is
defined as an XML attribute although it is not defined as an HDF
attribute in the NeXus file itself, e.g.</p></li>
</ul>
<!-- -->
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;temperature type=&quot;NX_FLOAT32&quot; units=&quot;K&quot;&gt;
</pre></div>
</div>
<ul class="simple">
<li><p>If the value of an attribute is not defined by the DTD, a short
description is enclosed within quotes and curly braces, e.g.</p></li>
</ul>
<!-- -->
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;NXdetector name=&quot;{Name of detector bank}&quot;&gt;
</pre></div>
</div>
<ul class="simple">
<li><p>Similarly, the value of a data item which is not defined by the DTD
should be placed within curly braces between the opening and closing
tag, e.g.</p></li>
</ul>
<!-- -->
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;temperature&gt;{Temperature of sample}&lt;/temperature&gt;
</pre></div>
</div>
<ul class="simple">
<li><p>Following the opening tag of a group entity and before the closing
tag of a data entity, there may be one of three symbols, which have
the same meanings that they have in regular expressions.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">*</span></code> May occur 0 or more times</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">+</span></code> May occur one or more times (i.e. at least once)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">?</span></code> May occur 0 or one times (i.e. no more than once)</p></li>
</ul>
</li>
</ul>
<p>e.g.</p>
<!-- -->
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;NXsample&gt;?
   &lt;temperature&gt;{Temperature of sample}?&lt;/temperature&gt; 
&lt;/NXsample&gt;
</pre></div>
</div>
<p>If no symbol is given, the item is mandatory.</p>
<ul class="simple">
<li><p>If a data item is an array, add the array dimensions in square
brackets to the type attribute. Use a colon if the dimension length
is not defined by the DTD, e.g.</p></li>
</ul>
<!-- -->
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;polar_angle type=&quot;NX_FLOAT32[:]&quot;&gt;
</pre></div>
</div>
<p>Replace the colon with i, j, … if you wish to match the dimension
length to other data items within the same group.</p>
<ul class="simple">
<li><p>If no data type is specified, it is assumed to be a character string
(NX_CHAR).</p></li>
<li><p>The “version” attribute of the “analysis” entity, defined in each
NXentry group should be set to $Revision$ when the file is first
written so that the CVS revision number is substituted when the XML
file is committed to the CVS server, e.g.</p></li>
</ul>
<!-- -->
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;analysis version=&quot;$Revision$&quot;&gt;
</pre></div>
</div>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Link to this heading">¶</a></h2>
<p>The instrument definitions are being constructed out of XML files for
each of the component groups. If you are interested in defining your own
definition, please form them from these component parts (remove the XML
document type at the top of each file). See NXtofnpd.xml for a complete
example. The following is a colorized version of NXmonitor.xml.</p>
<section id="nxmonitor-xml">
<h3>NXmonitor.xml<a class="headerlink" href="#nxmonitor-xml" title="Link to this heading">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; ?&gt; 
&lt;!--
URL: http://www.neutron.anl.gov/nexus/xml/NXmonitor.xml
Editor: Ray Osborn &lt;ROsborn@anl.gov&gt;
$Id$

Definition of monitor data. It is similar to the NXdata groups containing
monitor data and its associated dimension scale, e.g. time_of_flight or
wavelength in pulsed neutron instruments. However, it may also include
integrals, or scalar monitor counts, which are often used in both in both pulsed
and steady-state instrumentation.

--&gt; 
&lt;NXmonitor name=&quot;{Name of monitor}&quot;&gt; 
        &lt;distance units=&quot;m&quot; type=&quot;NX_FLOAT32&quot;&gt; {Distance of monitor from sample} &lt;/distance&gt; 
        &lt;integral type=&quot;NX_FLOAT32&quot;&gt; {Integral over monitor spectrum}? &lt;/integral&gt; 
        &lt;range type=&quot;NX_FLOAT32[2]&quot;&gt; {Time-of-flight range over which the integral was calculated}? &lt;/range&gt; 
        &lt;type&gt; &quot;Fission Chamber&quot;|&quot;Scintillator&quot;? &lt;/type&gt; 
        &lt;height units=&quot;cm&quot; type=&quot;NX_FLOAT32&quot;&gt; {Height of monitor}? &lt;/height&gt; 
        &lt;width units=&quot;cm&quot; type=&quot;NX_FLOAT32&quot;&gt; {Width of monitor}? &lt;/width&gt; 
        &lt;time_of_flight units=&quot;microseconds&quot; type=&quot;NX_FLOAT32[i]&quot;&gt; {Time-of-flight}? &lt;/time_of_flight&gt; 
        &lt;efficiency type=&quot;NX_FLOAT32[i]&quot;&gt; {Monitor efficiency}? &lt;/efficiency&gt; 
        &lt;data type=&quot;NX_INT32[i]&quot;&gt; {Monitor data}? &lt;/data&gt; 
&lt;/NXmonitor&gt;
</pre></div>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Metaformat</a><ul>
<li><a class="reference internal" href="#meta-dtd-definition">Meta-DTD Definition</a></li>
<li><a class="reference internal" href="#example">Example</a><ul>
<li><a class="reference internal" href="#nxmonitor-xml">NXmonitor.xml</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <p>Have a Question? <a href="https://github.com/nexusformat/wiki/issues/new">Get help</a></p>
  </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><p>
 <a href="http://www.nexusformat.org/">
   <img src="https://raw.githubusercontent.com/nexusformat/NIAC/master/NeXus_Logo/NeXus_Logo_dark.svg" alt="NeXus"
        width="150"
        height="50"
   >
</a>
<br>NeXus is developed as an international standard by scientists and programmers representing major scientific
 facilities in Europe, Asia, Australia, and North America in order to facilitate greater cooperation in the
 analysis and visualization of neutron, x-ray, and muon data.
<br><a href="http://www.nexusformat.org/">Home</a>
<br><a href="https://github.com/nexusformat">GitHub Organisation</a>
<br>© 2025 <a href="http://www.nexusformat.org/NIAC.html">NIAC</a>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="Monochromatic_Neutron_and_X-ray_Powder_Diffraction.html" title="Monochromatic Neutron and X-ray Powder Diffraction"
             >next</a></li>
        <li class="right" >
          <a href="Membership_Dates.html" title="Membership Dates"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html"></a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Metaformat</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2025, NIAC.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 9.1.0.
    </div>
  </body>
</html>