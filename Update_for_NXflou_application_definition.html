


<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Update for NXflou application definition</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css?v=34905f61" />
    <link rel="stylesheet" type="text/css" href="_static/details_summary_hide.css?v=30df4bca" />
    <link rel="stylesheet" href="_static/blockquote.css" type="text/css" />
    <link rel="stylesheet" href="_static/rubric.css" type="text/css" />
    <script src="_static/documentation_options.js?v=b08bce9f"></script>
    <script src="_static/doctools.js?v=fd6eb6e6"></script>
    <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
    <link rel="icon" href="https://raw.githubusercontent.com/nexusformat/NIAC/master/NeXus_Logo/NeXus_Logo_dark_square.svg"/>
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Utilities" href="Utilities.html" />
    <link rel="prev" title="TOFRawScan" href="TOFRawScan.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="Utilities.html" title="Utilities"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="TOFRawScan.html" title="TOFRawScan"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html"></a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Update for NXflou application definition</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="update-for-nxflou-application-definition">
<h1>Update for NXflou application definition<a class="headerlink" href="#update-for-nxflou-application-definition" title="Link to this heading">¶</a></h1>
<section id="problem">
<h2>Problem<a class="headerlink" href="#problem" title="Link to this heading">¶</a></h2>
<p>In todays fluorescence experiments users often raster the sample with
the beam and record a single spectrum at each sample location. For
beamline P06 at DESY this procedure became virtually the default mode of
operation. The current NXfluo application definition does not include
this kind of experiments as it only allows to store a single spectrum
below /:NXentry/:NXinstrument/:NXdetector. However NXfluo could be
easily modified to accommodate raster scans.</p>
</section>
<section id="proposed-modification">
<h2>Proposed modification<a class="headerlink" href="#proposed-modification" title="Link to this heading">¶</a></h2>
<p>The changes concern only the NXdetector instance of NXfluo. The layout
should be changed as follows</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>entry:NXentry
  instrument:NXinstrument
    flourescence:NXdetector
      data[npts,nenergy]
      energy[npts,nenergy]
</pre></div>
</div>
<p>where npts denotes the number of raster points. It is important to note
that we do not care about the particular pattern used to raster the
sample. This would be hard to achieve taking into account that there is
a nearly arbitrary number of patterns available. Even entirely irregular
paths would be possible (and have already been requested by one of the
beamline scientists here at DESY). One advantage of this pattern
agnostic approach would be that analysis software can stick to its
current workflow: processing the spectra recorded during an experiment
in a simple sequential order.</p>
<p>If the energy dataset is of shape [nenergy] (rank one) we can assume
that the energy range was the same for each point recorded. A single
spectrum can easily be stored by using the original schema of the
definition which could be interpreted as ntps=0.</p>
<p>Just as a recommendation (must not go into the standard), it would make
sense to store the position of the beam on the sample like this</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>entry:NXentry
  sample:NXsample
    x[npts]:NX_FLOAT
    y[npts]:NX_FLOAT  
</pre></div>
</div>
</section>
<section id="status-01-2015">
<h2>Status 01/2015<a class="headerlink" href="#status-01-2015" title="Link to this heading">¶</a></h2>
<p>The suggested change is in line with NeXus scan rules. Thus the change
was accepted at NIAC 2014. No vote was necessary.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Update for NXflou application definition</a><ul>
<li><a class="reference internal" href="#problem">Problem</a></li>
<li><a class="reference internal" href="#proposed-modification">Proposed modification</a></li>
<li><a class="reference internal" href="#status-01-2015">Status 01/2015</a></li>
</ul>
</li>
</ul>

  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <p>Have a Question? <a href="https://github.com/nexusformat/wiki/issues/new">Get help</a></p>
  </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><p>
 <a href="http://www.nexusformat.org/">
   <img src="https://raw.githubusercontent.com/nexusformat/NIAC/master/NeXus_Logo/NeXus_Logo_dark.svg" alt="NeXus"
        width="150"
        height="50"
   >
</a>
<br>NeXus is developed as an international standard by scientists and programmers representing major scientific
 facilities in Europe, Asia, Australia, and North America in order to facilitate greater cooperation in the
 analysis and visualization of neutron, x-ray, and muon data.
<br><a href="http://www.nexusformat.org/">Home</a>
<br><a href="https://github.com/nexusformat">GitHub Organisation</a>
<br>© 2025 <a href="http://www.nexusformat.org/NIAC.html">NIAC</a>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="Utilities.html" title="Utilities"
             >next</a></li>
        <li class="right" >
          <a href="TOFRawScan.html" title="TOFRawScan"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html"></a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Update for NXflou application definition</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2025, NIAC.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 9.1.0.
    </div>
  </body>
</html>