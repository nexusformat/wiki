


<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>NAPI Utility Routines</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css?v=34905f61" />
    <link rel="stylesheet" type="text/css" href="_static/details_summary_hide.css?v=30df4bca" />
    <link rel="stylesheet" href="_static/blockquote.css" type="text/css" />
    <link rel="stylesheet" href="_static/rubric.css" type="text/css" />
    <script src="_static/documentation_options.js?v=b08bce9f"></script>
    <script src="_static/doctools.js?v=fd6eb6e6"></script>
    <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
    <link rel="icon" href="https://raw.githubusercontent.com/nexusformat/NIAC/master/NeXus_Logo/NeXus_Logo_dark_square.svg"/>
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="NeXpy" href="NeXpy.html" />
    <link rel="prev" title="NAPI Routines" href="NAPI_Routines.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="NeXpy.html" title="NeXpy"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="NAPI_Routines.html" title="NAPI Routines"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html"></a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">NAPI Utility Routines</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="napi-utility-routines">
<h1>NAPI Utility Routines<a class="headerlink" href="#napi-utility-routines" title="Link to this heading">¶</a></h1>
<section id="nxuwriteglobals">
<h2>NXUwriteglobals<a class="headerlink" href="#nxuwriteglobals" title="Link to this heading">¶</a></h2>
<p>Writes the global attributes defined in the NeXus standard. Note that
NeXus_version, file_name and file_time are written automatically by
the NeXus API. The attribute arguments are optional, so the F90 keyword
syntax can be used for all of them, <em>e.g.</em>,</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>status = NXUwriteglobals (file_id, user=&quot;Joe Bloggs&quot;, email=&quot;JB@some.where&quot;)
</pre></div>
</div>
<p>;Usage:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>status = NXUwriteglobals (file_id, user, affiliation, address, phone, fax, email)
</pre></div>
</div>
<p>|- ! rowspan=“7” | Input Arguments | file_id | type(NXhandle) |
Identifier of NeXus file |- | user | character(len=*) | Name of user |-
| affiliation | character(len=*) | User’s affiliation |- | address |
character(len=*) | User’s address |- | phone | character(len=*) |
User’s telephone number |- | fax | character(len=*) | User’s fax number
|- | email | character(len=*) | User’s email address |}</p>
</section>
<section id="nxuwritegroup">
<h2>NXUwritegroup<a class="headerlink" href="#nxuwritegroup" title="Link to this heading">¶</a></h2>
<p>Creates a NeXus group leaving it open for subsequent data output.</p>
<p>;Usage:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>status = NXUwritegroup (file_id, group_name, group_class)
</pre></div>
</div>
<p>|- ! rowspan=“3” | Input Arguments | file_id | type(NXhandle) |
Identifier of NeXus file |- | group_name | character(len=*) | Name of
group |- | group_class | character(len=*) | Class of group |}</p>
</section>
<section id="nxuwritedata">
<h2>NXUwritedata<a class="headerlink" href="#nxuwritedata" title="Link to this heading">¶</a></h2>
<p>Creates, opens and writes a NeXus data set in the current group. “data”
can be a scalar value, or a one-, two-, or three-dimensional array. If
higher dimensions are required, use the core API (see NXputdata).
“units”, “data_start” and “data_size” are optional parameters. If you
want the data set to be compressed, set default compression parameters
in NXUsetcompress.</p>
<p>;Usage:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>status = NXUwritedata (file_id, data_name, data, units, data_start, data_size)
</pre></div>
</div>
<p>|- ! rowspan=“7”| Input Arguments |- | file_id | type(NXhandle) |
Identifier of NeXus file |- | data_name | character(len=*) | Name of
data set |- | data | integer<br />
integer(:)<br />
integer(:,:)<br />
integer(:,:,:)<br />
real<br />
real(:)<br />
real(:,:)<br />
real(:,:,:)<br />
character(len=*) | Data values |- | units | character(len=*) | Data
units (optional) |- | start | integer(:) | Starting indices of data slab
(optional) |- | size | integer(:) | Length of each dimension of data
slab (optional) |}</p>
</section>
<section id="nxureaddata">
<h2>NXUreaddata<a class="headerlink" href="#nxureaddata" title="Link to this heading">¶</a></h2>
<p>Opens and reads a NeXus data set in the current group. “data” can be a
scalar value, or a one-, two-, or three-dimensional array. If higher
dimensions are required, use the core API (see NXgetdata). “units”,
“data_start” and “data_size” are optional parameters.</p>
<p>;Usage:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>status = NXUreaddata (file_id, data_name, data, units, data_start, data_size)
</pre></div>
</div>
<p>|- ! rowspan=“4” | Input Arguments | file_id | type(NXhandle) |
Identifier of NeXus file |- | data_name | character(len=*) | Name of
data set |- | start | integer(:) | Starting indices of data slab
(optional) |- | size | integer(:) | Length of each dimension of data
slab (optional) |- ! rowspan=“2” | Output Arguments | data | integer<br />
integer(:)<br />
integer(:,:)<br />
integer(:,:,:)<br />
real<br />
real(:)<br />
real(:,:)<br />
real(:,:,:)<br />
character(len=*) | Data values |- | units | character(len=*) | Data
units (optional) |}</p>
</section>
<section id="nxuwritehistogram">
<h2>NXUwritehistogram<a class="headerlink" href="#nxuwritehistogram" title="Link to this heading">¶</a></h2>
<p>Creates, opens and writes a one dimensional NeXus data item with units.
The input “data” are assumed to be histogram bin boundaries, and the
stored data contains the histogram centers, i.e. the stored array has a
dimension one less than the “data”. The “histogram_offset” attribute is
automatically set to half the width of the first bin, which allows the
regeneration of the bin boundaries by NXUreadhistogram.</p>
<p>;Usage:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>status = NXUwritehistogram (file_id, data_name, data, units)
</pre></div>
</div>
<p>|- ! rowspan=“4” | Input Arguments | file_id | type(NXhandle) |
Identifier of NeXus file |- | data_name | character(len=*) | Name of
histogram |- | data | real(:), pointer | Histogram bin boundaries |- |
units | character(len=*) | Data units (optional) |}</p>
</section>
<section id="nxureadhistogram">
<h2>NXUreadhistogram<a class="headerlink" href="#nxureadhistogram" title="Link to this heading">¶</a></h2>
<p>Opens and reads a one dimensional real data set in the current group.
The data are assumed to be histogram bin boundaries, which are stored in
NeXus files as bin centers with the first bin offset defined as the
attribute “histogram_offset”, i.e. the returned array has a dimension
one greater than the stored array (see NXUwritehistogram). If the
“histogram_offset” attribute is not present, it is assumed that the
first bin width equals the separation of the first two bin centers.</p>
<p>;Usage:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>status = NXUreadhistogram (file_id, data_name, data, units)
</pre></div>
</div>
<p>|- ! rowspan=“2” | Input Arguments | file_id | type(NXhandle) |
Identifier of NeXus file |- | data_name | character(len=*) | Name of
histogram |- ! rowspan=“2” | Output Arguments | data | real(:), pointer
| Histogram bin boundaries |- | units | character(len=*) | Data units
(optional) |}</p>
</section>
<section id="nxusetcompress">
<h2>NXUsetcompress<a class="headerlink" href="#nxusetcompress" title="Link to this heading">¶</a></h2>
<p>Sets the compression type to be used in subsequent calls to
NXUwritedata. The second parameter, which is optional, sets the minimum
number of elements in a data set before any compression is performed.
This is to prevent inefficient compression of small data sets. The
default value is 100.</p>
<p>;Usage:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>status = NXUsetcompress (file_id, compress_type, compress_size)
</pre></div>
</div>
<p>|- ! rowspan=“3” | Input Arguments | file_id | type(NXhandle) |
Identifier of NeXus file |- | compress_type | integer |</p>
<p>Compression algorithm:NX_COMP_LZW - GZIP<br />
NX_COMP_HUF - Skipping Huffman</p>
<p>NX_COMP_RLE - Run Length Encoding</p>
<p>NX_COMP_NONE - No compression</p>
<p>|- | compress_size | integer | Minimum number of elements in data set
before data compression is attempted. |}</p>
</section>
<section id="nxufindgroup">
<h2>NXUfindgroup<a class="headerlink" href="#nxufindgroup" title="Link to this heading">¶</a></h2>
<p>Finds if NeXus group exists in the current group and returns its class.
The returned status is NX_EOD if the group is not found.</p>
<p>;Usage:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>status = NXUfindgroup (file_id, group_name, group_class)
</pre></div>
</div>
<p>|- ! rowspan=“2” | Input Arguments | file_id | type(NXhandle) |
Identifier of NeXus file |- | group_name | character(len=*) | Name of
group |- ! | Output Arguments | group_class | character(len=*) | Class
of group |}</p>
</section>
<section id="nxufindclass">
<h2>NXUfindclass<a class="headerlink" href="#nxufindclass" title="Link to this heading">¶</a></h2>
<p>Finds if a NeXus group of the requested class exists in the current
group and returns its name. “find_index” is used when there is more
than one group of the required class; find_index = 3 returns the name
of the third group found. The returned status is NX_EOD if no such
group is found.</p>
<p>;Usage:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>status = NXUfindclass (file_id, group_class, group_name, find_index)
</pre></div>
</div>
<p>|- ! rowspan=“3” | Input Arguments | file_id | type(NXhandle) |
Identifier of NeXus file |- | group_class | character(len=*) |
Requested class |- | find_index | integer | Search index |- ! | Output
Arguments | group_name | character(len=*) | Name of group with that
class |}</p>
</section>
<section id="nxufinddata">
<h2>NXUfinddata<a class="headerlink" href="#nxufinddata" title="Link to this heading">¶</a></h2>
<p>Finds if a NeXus data set of the requested name exists in the current
group. The returned status is NX_EOD if the data set is not found.</p>
<p>;Usage:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>status = NXUfinddata (file_id, data_name)
</pre></div>
</div>
<p>|- ! rowspan=“2” | Input Arguments | file_id | type(NXhandle) |
Identifier of NeXus file |- | data_name | character(len=*) | Requested
data set |}</p>
</section>
<section id="nxufindattr">
<h2>NXUfindattr<a class="headerlink" href="#nxufindattr" title="Link to this heading">¶</a></h2>
<p>Finds if a NeXus attribute of the current data set exists. The returned
status is NX_EOD if the attribute is not found.</p>
<p>;Usage:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>status = NXUfindattr (file_id, attr_name)
</pre></div>
</div>
<p>|- ! rowspan=“2” | Input Arguments | file_id | type(NXhandle) |
Identifier of NeXus file |- | attr_name | character(len=*) | Requested
attribute name |}</p>
</section>
<section id="nxufindsignal">
<h2>NXUfindsignal<a class="headerlink" href="#nxufindsignal" title="Link to this heading">¶</a></h2>
<p>Finds the NeXus data set in the current group with the required signal
attribute, and returns its name, rank, type and dimensions. The returned
status is NX_EOD if the signal data set is not found.</p>
<p>;Usage:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>status = NXUfindsignal (file_id, signal, data_name, data_rank, data_type, data_dimensions)
</pre></div>
</div>
<p>|- ! rowspan=“2” | Input Arguments | file_id | type(NXhandle) |
Identifier of NeXus file |- | signal | integer | Required value of
signal attribute |- ! rowspan=“4” | Output Arguments | data_name |
character(len=*) | Data set with required signal attribute |- |
data_rank | integer | Rank of data set |- | data_type | integer | Type
of data set (see list of valid data types) |- | data_dimensions |
integer(:) | Dimensions of data set |}</p>
</section>
<section id="nxufindaxis">
<h2>NXUfindaxis<a class="headerlink" href="#nxufindaxis" title="Link to this heading">¶</a></h2>
<p>Finds the NeXus data set in the current group with the required axis and
primary attributes, and returns its name, rank, type and dimensions.
Note that the axis data set should be one-dimensional. The returned
status is NX_EOD if the axis data set is not found.</p>
<p>;Usage:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>status = NXUfindaxis (file_id, axis, primary, data_name, data_rank, data_type, data_dimensions)
</pre></div>
</div>
<p>|- ! rowspan=“3” | Input Arguments | file_id | type(NXhandle) |
Identifier of NeXus file |- | axis | integer | Required value of axis
attribute |- | primary | integer | Required value of primary attribute
|- ! rowspan=“4” | Output Arguments | data_name | character(len=*) |
Data set with required signal attribute |- | data_rank | integer | Rank
of data set |- | data_type | integer | Type of data set (see list of
valid data types) |- | data_dimensions | integer(:) | Dimensions of
data set |}</p>
</section>
<section id="nxufindlink">
<h2>NXUfindlink<a class="headerlink" href="#nxufindlink" title="Link to this heading">¶</a></h2>
<p>Finds another group to which the currently open data set is linked and
leaves it open for getting associated data. “group_id” stores the ID of
the original group to enable a subsequent return (see NXUresumelink).
“group_class” is an optional argument which restricts the search to the
specified group class. The returned status is NX_EOD if the group is
not found.</p>
<p>;Usage:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>status = NXUfindlink (file_id, group_id, group_class)
</pre></div>
</div>
<p>|- ! rowspan=“2” | Input Arguments | file_id | type(NXhandle) |
Identifier of NeXus file |- | group_class | character(len=*) | Group
classes to be searched. |- ! | Output Arguments | group_id |
type(NXlink) | ID of current group. |}</p>
</section>
<section id="nxuresumelink">
<h2>NXUresumelink<a class="headerlink" href="#nxuresumelink" title="Link to this heading">¶</a></h2>
<p>Returns to the original group from which an NXfindlink call was issued.</p>
<p>;Usage:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>status = NXUresumelink (file_id, group_id)
</pre></div>
</div>
<p>|- ! rowspan=“2” | Input Arguments | file_id | type(NXhandle) |
Identifier of NeXus file |- | group_id | type(NXlink) | ID of original
group |}</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">NAPI Utility Routines</a><ul>
<li><a class="reference internal" href="#nxuwriteglobals">NXUwriteglobals</a></li>
<li><a class="reference internal" href="#nxuwritegroup">NXUwritegroup</a></li>
<li><a class="reference internal" href="#nxuwritedata">NXUwritedata</a></li>
<li><a class="reference internal" href="#nxureaddata">NXUreaddata</a></li>
<li><a class="reference internal" href="#nxuwritehistogram">NXUwritehistogram</a></li>
<li><a class="reference internal" href="#nxureadhistogram">NXUreadhistogram</a></li>
<li><a class="reference internal" href="#nxusetcompress">NXUsetcompress</a></li>
<li><a class="reference internal" href="#nxufindgroup">NXUfindgroup</a></li>
<li><a class="reference internal" href="#nxufindclass">NXUfindclass</a></li>
<li><a class="reference internal" href="#nxufinddata">NXUfinddata</a></li>
<li><a class="reference internal" href="#nxufindattr">NXUfindattr</a></li>
<li><a class="reference internal" href="#nxufindsignal">NXUfindsignal</a></li>
<li><a class="reference internal" href="#nxufindaxis">NXUfindaxis</a></li>
<li><a class="reference internal" href="#nxufindlink">NXUfindlink</a></li>
<li><a class="reference internal" href="#nxuresumelink">NXUresumelink</a></li>
</ul>
</li>
</ul>

  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <p>Have a Question? <a href="https://github.com/nexusformat/wiki/issues/new">Get help</a></p>
  </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><p>
 <a href="http://www.nexusformat.org/">
   <img src="https://raw.githubusercontent.com/nexusformat/NIAC/master/NeXus_Logo/NeXus_Logo_dark.svg" alt="NeXus"
        width="150"
        height="50"
   >
</a>
<br>NeXus is developed as an international standard by scientists and programmers representing major scientific
 facilities in Europe, Asia, Australia, and North America in order to facilitate greater cooperation in the
 analysis and visualization of neutron, x-ray, and muon data.
<br><a href="http://www.nexusformat.org/">Home</a>
<br><a href="https://github.com/nexusformat">GitHub Organisation</a>
<br>© 2025 <a href="http://www.nexusformat.org/NIAC.html">NIAC</a>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="NeXpy.html" title="NeXpy"
             >next</a></li>
        <li class="right" >
          <a href="NAPI_Routines.html" title="NAPI Routines"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html"></a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">NAPI Utility Routines</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2025, NIAC.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 9.1.0.
    </div>
  </body>
</html>